# QueueingSimu - インタラクティブ待ち行列シミュレーション

Pythonで実装されたインタラクティブな待ち行列シミュレーションツールです。M/M/1、M/M/cなどの待ち行列モデルをサポートし、リアルタイムの可視化と統計分析を提供します。

## 機能

- **複数の待ち行列モデルのサポート**
  - M/M/1 (単一サーバー)
  - M/M/c (複数サーバー)

- **インタラクティブなCLIインターフェース**
  - パラメータの動的設定
  - メニューベースの操作

- **リアルタイム可視化**
  - 待ち行列の長さの時系列グラフ
  - システム内顧客数の追跡
  - アニメーション表示

- **統計分析**
  - 平均待ち時間
  - 平均システム滞在時間
  - サーバー利用率
  - 待ち行列の長さ

- **理論値との比較**
  - シミュレーション結果と理論値の比較
  - 誤差率の計算

## インストール

### 必要要件

- Python 3.7以上
- pip

### セットアップ

```bash
# リポジトリをクローン
git clone <repository-url>
cd QueueingSimu

# 依存パッケージをインストール
pip install -r requirements.txt
```

## 使用方法

### 基本的な使い方

```bash
python interactive_sim.py
```

### メニューオプション

プログラムを起動すると、以下のメニューが表示されます：

1. **パラメータを設定** - シミュレーションパラメータを設定
   - サーバー数 (c)
   - 到着率 (λ)
   - サービス率 (μ)
   - シミュレーション時間

2. **シミュレーションを実行** - 設定したパラメータでシミュレーションを実行

3. **統計を表示** - シミュレーション結果の統計を表示

4. **グラフを表示** - 待ち行列の長さとシステム内顧客数のグラフを表示

5. **理論値と比較** - シミュレーション結果と理論値を比較

6. **リアルタイムシミュレーション** - アニメーションでリアルタイム表示

0. **終了** - プログラムを終了

### 使用例

#### 例1: M/M/1 待ち行列

```
サーバー数: 1
到着率 λ: 0.8
サービス率 μ: 1.0
シミュレーション時間: 100
```

このパラメータで、利用率 ρ = 0.8 の単一サーバー待ち行列をシミュレートできます。

#### 例2: M/M/3 待ち行列

```
サーバー数: 3
到着率 λ: 2.0
サービス率 μ: 1.0
シミュレーション時間: 100
```

このパラメータで、利用率 ρ = 0.67 の3サーバー待ち行列をシミュレートできます。

## プログラムの仕組み

### 離散イベントシミュレーション

このシミュレータは離散イベントシミュレーション手法を使用しています：

1. **イベント**:
   - 到着イベント: 新しい顧客がシステムに到着
   - 出発イベント: 顧客がサービスを完了して出発

2. **イベントキュー**:
   - 優先度キュー（ヒープ）を使用して効率的にイベントを管理

3. **統計収集**:
   - 時間加重平均を使用して正確な統計を計算

### 理論値の計算

M/M/1 および M/M/c モデルの理論値は、待ち行列理論の公式を使用して計算されます：

- **M/M/1**: 基本的なPoisson到着・指数サービス・単一サーバーモデル
- **M/M/c**: Erlang-C公式を使用した複数サーバーモデル

## ファイル構成

```
QueueingSimu/
├── queue_simulation.py    # コアシミュレーションエンジン
├── interactive_sim.py     # インタラクティブCLIインターフェース
├── requirements.txt       # 依存パッケージ
└── README.md             # このファイル
```

## 技術仕様

### queue_simulation.py

- `Customer`: 顧客データクラス
- `QueueSimulation`: メインシミュレーションクラス
  - イベント駆動型シミュレーション
  - 統計収集
  - 理論値計算

### interactive_sim.py

- `InteractiveQueueSimulator`: インタラクティブUIクラス
  - メニューシステム
  - パラメータ管理
  - 可視化
  - リアルタイムアニメーション

## ライセンス

MIT License

## 貢献

プルリクエストを歓迎します。大きな変更の場合は、まずissueを開いて変更内容を議論してください。

## 参考資料

- Gross, D., & Harris, C. M. (1998). Fundamentals of queueing theory. Wiley.
- Kleinrock, L. (1975). Queueing Systems, Volume 1: Theory. Wiley-Interscience.
